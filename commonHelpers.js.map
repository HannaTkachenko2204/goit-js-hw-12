{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43261093-4c9b6888dd775193ca00ecdb2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function imageSearch(inputEl, page) {\n  try {\n    const config = {\n      params: {\n        key: API_KEY,\n        q: `${inputEl}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    };\n    const { data } = await axios.get(`${BASE_URL}`, config);\n    return data;\n  } catch (error) {\n    alert(error);\n  }\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <ul class=\"box-list\">\n              <li>\n                <h2 class=\"box-title\">Likes</h2>\n                <p class=\"box-text\">${likes}</p>\n              </li>\n              <li>\n                <h2 class=\"box-title\">Views</h2>\n                <p class=\"box-text\">${views}</p>\n              </li>\n              <li class=\"box-item\">\n                <h2 class=\"box-title\">Comments</h2>\n                <p class=\"box-text\">${comments}</p>\n              </li>\n              <li class=\"box-item\">\n                <h2 class=\"box-title\">Downloads</h2>\n                <p class=\"box-text\">${downloads}</p>\n              </li>\n            </ul>\n          </a>\n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { imageSearch } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst formEl = document.querySelector('form');\nconst ulEl = document.querySelector('ul');\nconst loaderEl = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn');\n\nlet inputEl;\nlet page = 1;\nlet deltaPage;\n\nloaderEl.style.display = 'none';\nbtnMore.style.display = 'none';\n\nformEl.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n  page = 1;\n  inputEl = form.elements.imgname.value;\n  //console.log(inputEl);\n  if (inputEl === '') {\n    iziToast.show({\n      message: 'Field must be filled in!',\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: '#FFFFFF',\n      transitionIn: 'fadeln',\n      timeout: 4000,\n    });\n    return;\n  }\n\n  loaderEl.style.display = 'block';\n\n  try {\n    const data = await imageSearch(inputEl, page);\n    //console.log(data.hits.length);\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: 'red',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n      loaderEl.style.display = 'none';\n      btnMore.style.display = 'none';\n      ulEl.innerHTML = '';\n      return;\n    }\n    loaderEl.style.display = 'none';\n    ulEl.innerHTML = createMarkup(data.hits);\n    btnMore.style.display = 'block';\n    deltaPage = Math.ceil(data.totalHits / data.hits.length);\n    //console.log(page);\n    //console.log(deltaPage);\n    if (page >= deltaPage) {\n      btnMore.style.display = 'none';\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'green',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n    }\n    //console.log(ulEl);\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n    //btnMore.style.display = 'block';\n  } catch (error) {\n    alert(error);\n  }\n}\n\nbtnMore.addEventListener('click', handleClick);\n\nasync function handleClick() {\n  btnMore.style.display = 'none';\n  loaderEl.style.display = 'block';\n  page += 1;\n\n  try {\n    const data = await imageSearch(inputEl, page);\n    loaderEl.style.display = 'none';\n    ulEl.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    btnMore.style.display = 'block';\n    //console.log(page);\n    //console.log(deltaPage);\n    if (page >= deltaPage) {\n      btnMore.style.display = 'none';\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'green',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n    }\n\n    const card = document.querySelector('.gallery-link');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n  } catch (error) {\n    alert(error);\n  }\n}\n"],"names":["API_KEY","BASE_URL","imageSearch","inputEl","page","config","data","axios","error","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","ulEl","loaderEl","btnMore","deltaPage","handleSubmit","event","form","iziToast","SimpleLightbox","handleClick","cardHeight"],"mappings":"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"}